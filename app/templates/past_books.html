{% extends "base.html" %} {% block title %}Past Books - TechSisters Book Club{%
endblock %} {% block content %}
<div class="max-w-4xl mx-auto px-4 py-12">
  <!-- Header + Search -->
  <div class="text-center mb-12">
    <h1
      class="text-4xl font-bold text-gray-900 mb-4 flex items-center justify-center gap-2"
    >
      <i data-lucide="book-copy" class="icon icon-lg icon-primary"></i>
      Past Books
    </h1>
    <p class="text-xl text-gray-600 mb-8">{{ total_count }} books completed</p>

    <!-- Updated Search Form -->
    <form
      hx-get="/past-books"
      hx-target="#books-list"
      hx-swap="innerHTML"
      class="max-w-md mx-auto"
    >
      <div class="flex gap-2">
        <div class="relative flex-1">
          <input
            type="text"
            name="search"
            value="{{ search or '' }}"
            placeholder="Search by title or author..."
            class="w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-[var(--primary)] focus:border-[var(--primary)] transition-all"
          />
          <i
            data-lucide="search"
            class="icon icon-sm absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"
          ></i>
        </div>
        <button
          type="submit"
          class="btn-secondary text-white px-6 py-3 rounded-xl font-semibold flex items-center gap-2 hover:scale-[1.02] transition-transform htmx-indicator"
        >
          <span class="htmx-indicator:hidden">Search</span>
          <div class="htmx-indicator hidden flex items-center gap-2">
            <div class="loading-spinner"></div>
            <span>Processing...</span>
          </div>
        </button>
      </div>

      <!-- Clear Search Button -->
      {% if search %}
      <button
        type="button"
        onclick="window.location.href = '/past-books'"
        class="mt-3 text-sm text-gray-600 hover:text-[var(--primary)] flex items-center gap-1 mx-auto"
      >
        <i data-lucide="x-circle" class="icon icon-sm"></i>
        Clear search
      </button>
      {% endif %}
    </form>

    <!-- Books Grid + Pagination (HTMX target) -->
    <div id="books-list">{% include "partials/books_grid.html" %}</div>
  </div>
</div>
{% endblock %}
